sudo: required

services:
  - docker

branches:
  # Only build on these branches.
  only:
    - master
    - develop
    - /^hotfix/

env:
  global:
    - TZ=Europe/Amsterdam
    - GITHUB_REPO="wearespindle/flindt"
    - DOCKER_COMPOSE_VERSION=1.14.0

language: python
python:
  - "3.4"

before_install:
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin

before_script:
  # Echo some variables for debug purposes.
  - echo "Current datetime is $(date +'%Y%m%d%H%M')"

script:
  # Always build new images for docker.
  - docker-compose -f docker-compose.yml build

notifications:
  email: false
  slack:
    on_success: always # default: always
    on_failure: always # default: always
    secure: re6jnSR7H2XcGwTbnyykKN6hGkn+JqC3J1oVHXVSG+KFjxA3Tq4vof0CUIgTcLeThXjkQVKWWkEtUPvh7t1duAxyIMFYKs35KeBycpB6D7QiPxPXUmL3Hh+6TTkxWhN5DofN0gaMBG2eIfBAaz9PpK5CQHuOKoXRxN21i9U6ZEN9qohV1oBcCpcsXD6W9amItkRnC7Iric3tFhSe98Y+dM9SfzyVxAHBBddyDkSqawJDKS638Wkb1Oyt0l1E8DyHuktRrElpG9yP8c0greaUc6/+ZcmJc1hJIaZbS1Orvd2EhAX7RXWOTaoAQ1VB/KL3dCQ3S4emYOd71zVjA4EB8agToQSQkuFtjOGSvvnLhf4gc4LUW46kaKa3tJvh8dxrX1cNol4DUJ5wig1ZITJZa+hwClbTE5DgrqQn0kT6fH6uhxGEFUfOsIPA5XkgjLRFy4PUYkXiVXKboBLf6EBLQuWin/MB/421ORELSXQGaNVhBgVbDvqKeyVUNl8QhLg34lpRbvrEn9vS6WaeQFGZnXtRjazDrhJJ4zNrEnlUdZKclcRwybORgl28abbECDLGWgZTdtZw/tWTMjCO+k/pTGZDkXwHjlAkQbTcjNqQn52g2cFVeQqG+3OEAqra2Rp8QhxEmeGgta37fp/p3+/3xE8lq3spXd99YFrhFcx9vjQ=
